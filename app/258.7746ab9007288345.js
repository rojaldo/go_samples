"use strict";(self.webpackChunkng14=self.webpackChunkng14||[]).push([[258],{6258:(De,Y,s)=>{s.r(Y),s.d(Y,{ApodModule:()=>Te});var _=s(6895),L=s(8416);class A{constructor(a){this._date="",this._explanation="",this._hdurl="",this._mediaType="",this._serviceVersion="",this._title="",this._url="",this._videoID="",a&&(this._date=a.date,this._explanation=a.explanation,this._hdurl=a.hdurl,this._mediaType=a.media_type,this._serviceVersion=a.service_version,this._title=a.title,this._url=a.url,this.isYTVideo()&&this._setVideoID())}get date(){return this._date}get explanation(){return this._explanation}get hdurl(){return this._hdurl}get mediaType(){return this._mediaType}get serviceVersion(){return this._serviceVersion}get title(){return this._title}get url(){return this._url}get videoID(){return this._videoID}isImage(){return"image"===this._mediaType}isVideo(){return"video"===this._mediaType}isYTVideo(){return this._url.includes("youtube")}_setVideoID(){var e=this.url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);this._videoID=e&&11==e[7].length?e[7]:"ERROR"}}var n=s(1571),S=s(5148),c=s(433);let X=(()=>{class t{constructor(e){this.calendar=e,this.onDateSelected=new n.vpe,this.selectedDate=this.calendar.getToday()}ngOnInit(){}sendDate(e){this.onDateSelected.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(S.vL))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-apod-picker"]],outputs:{onDateSelected:"onDateSelected"},decls:6,vars:1,consts:[[1,"row","row-cols-sm-auto"],[1,"col-12"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","dateSelect"],["d","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"]],template:function(e,i){if(1&e){const r=n.EpF();n.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"input",3,4),n.NdJ("ngModelChange",function(d){return i.selectedDate=d})("dateSelect",function(d){return i.sendDate(d)}),n.qZA(),n.TgZ(5,"button",5),n.NdJ("click",function(){n.CHM(r);const d=n.MAs(4);return n.KtG(d.toggle())}),n.qZA()()()()}2&e&&(n.xp6(3),n.Q6J("ngModel",i.selectedDate))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,S.J4]}),t})();var h=s(1135),B=s(529);let E=(()=>{class t{constructor(e){this.http=e,this._data={},this.data$=new h.X(this.data)}get data(){return{...this._data}}getApod(e){let r="https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY";e&&(r+=`&date=${e}`);const o={next:d=>{this._data=d,this.data$.next(this.data)},error:d=>console.error(d),complete:()=>console.log("complete")};this.http.get(r).subscribe(o)}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(B.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})();var m=s(7579),v=s(9646),P=s(9751),C=s(576),M=s(3268);function k(t,a,e){return e?k(t,a).pipe((0,M.Z)(e)):new P.y(i=>{const r=(...d)=>i.next(1===d.length?d[0]:d),o=t(r);return(0,C.m)(a)?()=>a(r,o):void 0})}var p=s(9841),T=s(9635),G=s(6451),U=s(5698),Z=s(8675),H=s(8505),D=s(2722),K=s(4033),$=s(8421),V=s(4482);const j={connector:()=>new m.x};function Q(t,a=j){const{connector:e}=a;return(0,V.e)((i,r)=>{const o=e();(0,$.Xf)(t(function W(t){return new P.y(a=>t.subscribe(a))}(o))).subscribe(r),r.add(i.subscribe(o))})}var te=s(3900),ne=s(5577),I=s(1365),b=s(4004),ae=s(5026),ie=s(1884),re=s(5797),se=s(3269);function O(...t){const a=(0,se.jO)(t);return a?(0,T.z)(O(...t),(0,M.Z)(a)):(0,V.e)((e,i)=>{(0,p.l)([e,...(0,re.k)(t)])(i)})}var oe=s(5403),le=s(9300);const ue=["youtubeContainer"];let J=(()=>{class t{constructor(e,i){this._ngZone=e,this._youtubeContainer=new m.x,this._destroyed=new m.x,this._playerChanges=new h.X(void 0),this._videoId=new h.X(void 0),this._height=new h.X(390),this._width=new h.X(640),this._startSeconds=new h.X(void 0),this._endSeconds=new h.X(void 0),this._suggestedQuality=new h.X(void 0),this._playerVars=new h.X(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=(0,_.NF)(i)}get videoId(){return this._videoId.value}set videoId(e){this._videoId.next(e)}get height(){return this._height.value}set height(e){this._height.next(e||390)}get width(){return this._width.value}set width(e){this._width.next(e||640)}set startSeconds(e){this._startSeconds.next(e)}set endSeconds(e){this._endSeconds.next(e)}set suggestedQuality(e){this._suggestedQuality.next(e)}get playerVars(){return this._playerVars.value}set playerVars(e){this._playerVars.next(e)}ngOnInit(){if(!this._isBrowser)return;let e=(0,v.of)(!0);if(!window.YT||!window.YT.Player){const r=new m.x;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},e=r.pipe((0,U.q)(1),(0,Z.O)(!1))}const i=function ye(t,a,e,i,r,o,d){const g=(0,p.a)([a,o]).pipe((0,I.M)((0,p.a)([i,r])),(0,b.U)(([y,x])=>{const[l,u]=y,[f,R]=x;return l?{videoId:l,playerVars:u,width:f,height:R}:void 0}));return(0,p.a)([t,g,(0,v.of)(d)]).pipe(function ge(t){return(0,T.z)(O(t),function de(t){return(0,V.e)((a,e)=>{let i=!1,r=0;a.subscribe((0,oe.x)(e,o=>(i||(i=!t(o,r++)))&&e.next(o)))})}(([a,e])=>!e),(0,b.U)(([a])=>a))}(e),(0,ae.R)(fe,void 0),(0,ie.x)())}(this._youtubeContainer,this._videoId,e,this._width,this._height,this._playerVars,this._ngZone).pipe((0,H.b)(r=>{this._playerChanges.next(r)}),function ce(t){return(0,ne.z)(a=>a?N(a)?(0,v.of)(a):new P.y(e=>{let i=!1,r=!1;const o=d=>{r=!0,i||(d.target.removeEventListener("onReady",o),e.next(d.target))};return a.addEventListener("onReady",o),()=>{i=!0,r||t(a)}}).pipe((0,U.q)(1),(0,Z.O)(void 0)):(0,v.of)(void 0))}(r=>{N(r)||r.destroy()}),(0,D.R)(this._destroyed),function ee(t){return t?a=>Q(t)(a):a=>function q(t,a){const e=(0,C.m)(t)?t:()=>t;return(0,C.m)(a)?Q(a,{connector:e}):i=>new K.c(i,e)}(new m.x)(a)}());i.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function he(t,a,e){(0,p.a)([t,a,e]).subscribe(([i,r,o])=>i&&i.setSize(r,o))}(i,this._width,this._height),function pe(t,a){(0,p.a)([t,a]).subscribe(([e,i])=>e&&i&&e.setPlaybackQuality(i))}(i,this._suggestedQuality),function me(t,a,e,i,r,o){const d=(0,p.a)([e,i]).pipe((0,b.U)(([l,u])=>({startSeconds:l,endSeconds:u}))),g=d.pipe(w(t,l=>!!l&&!function ve(t){const a=t.getPlayerState();return a!==YT.PlayerState.UNSTARTED&&a!==YT.PlayerState.CUED}(l))),y=a.pipe(w(t,(l,u)=>!!l&&l.videoId!==u)),x=t.pipe(w((0,p.a)([a,d]),([l,u],f)=>!(!f||l==f.videoId&&!u.startSeconds&&!u.endSeconds)));(0,G.T)(x,y,g).pipe((0,I.M)((0,p.a)([t,a,d,r])),(0,b.U)(([l,u])=>u),(0,D.R)(o)).subscribe(([l,u,f,R])=>{!u||!l||(l.videoId=u,l.cueVideoById({videoId:u,suggestedQuality:R,...f}))})}(i,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),i.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(e,i){this._player?this._player.seekTo(e,i):this._getPendingState().seek={seconds:e,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(e){this._player?this._player.setVolume(e):this._getPendingState().volume=e}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(e){if(this._player)return this._player.setPlaybackRate(e);this._getPendingState().playbackRate=e}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(e,i){const{playbackState:r,playbackRate:o,volume:d,muted:g,seek:y}=i;switch(r){case YT.PlayerState.PLAYING:e.playVideo();break;case YT.PlayerState.PAUSED:e.pauseVideo();break;case YT.PlayerState.CUED:e.stopVideo()}null!=o&&e.setPlaybackRate(o),null!=d&&e.setVolume(d),null!=g&&(g?e.mute():e.unMute()),null!=y&&e.seekTo(y.seconds,y.allowSeekAhead)}_getLazyEmitter(e){return this._playerChanges.pipe((0,te.w)(i=>i?k(r=>{i.addEventListener(e,r)},r=>{try{i.removeEventListener&&i.removeEventListener(e,r)}catch{}}):(0,v.of)()),i=>new P.y(r=>i.subscribe({next:o=>this._ngZone.run(()=>r.next(o)),error:o=>r.error(o),complete:()=>r.complete()})),(0,D.R)(this._destroyed))}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(n.R0b),n.Y36(n.Lbi))},t.\u0275cmp=n.Xpm({type:t,selectors:[["youtube-player"]],viewQuery:function(e,i){if(1&e&&n.Gf(ue,5),2&e){let r;n.iGM(r=n.CRH())&&(i.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(e,i){1&e&&n._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),t})();function fe(t,[a,e,i]){if(t&&e&&t.playerVars!==e.playerVars)t.destroy();else{if(!e)return void(t&&t.destroy());if(t)return t}const r=i.runOutsideAngular(()=>new YT.Player(a,e));return r.videoId=e.videoId,r.playerVars=e.playerVars,r}function N(t){return"getPlayerStatus"in t}function w(t,a){return(0,T.z)((0,I.M)(t),(0,le.h)(([e,i])=>a(i,e)),(0,b.U)(([e])=>e))}let be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({}),t})();function Se(t,a){if(1&t&&n._UZ(0,"img",8),2&t){const e=n.oxw();n.Q6J("src",e.apodData.url,n.LSH)}}function Pe(t,a){if(1&t&&n._UZ(0,"youtube-player",9),2&t){const e=n.oxw();n.Q6J("videoId",e.apodData.videoID)}}let _e=(()=>{class t{constructor(e,i){this.service=e,this.calendar=i,this.apodData=new A,this.date=this.calendar.getToday()}ngOnInit(){this.service.data$.subscribe(e=>this.apodData=new A(e)),this.service.getApod()}ngOnChanges(e){console.log("Changes:"+JSON.stringify(e.date)),e.date&&e.date.currentValue.year&&e.date.currentValue.month&&e.date.currentValue.day&&this.service.getApod(e.date.currentValue.year+"-"+e.date.currentValue.month+"-"+e.date.currentValue.day)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(E),n.Y36(S.vL))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-apod-content"]],inputs:{apodData:"apodData",date:"date"},features:[n.TTD],decls:14,vars:6,consts:[[1,"jumbotron"],[1,"display-3"],[1,"lead"],[1,"container-fluid","d-flex"],["alt","","class","mx-auto",3,"src",4,"ngIf"],["class","mx-auto",3,"videoId",4,"ngIf"],[1,"my-2"],["role","button",1,"btn","btn-primary","btn-lg",3,"href"],["alt","",1,"mx-auto",3,"src"],[1,"mx-auto",3,"videoId"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"h1",1),n._uU(2),n.qZA(),n.TgZ(3,"p",2),n._uU(4),n.qZA(),n.TgZ(5,"div",3),n.YNc(6,Se,1,1,"img",4),n.YNc(7,Pe,1,1,"youtube-player",5),n.qZA(),n._UZ(8,"hr",6),n.TgZ(9,"p"),n._uU(10),n.qZA(),n.TgZ(11,"p",2)(12,"a",7),n._uU(13,"HD Image"),n.qZA()()()),2&e&&(n.xp6(2),n.Oqu(i.apodData.title),n.xp6(2),n.Oqu(i.apodData.date),n.xp6(2),n.Q6J("ngIf",i.apodData.isImage()),n.xp6(1),n.Q6J("ngIf",i.apodData.isVideo()),n.xp6(3),n.Oqu(i.apodData.explanation),n.xp6(2),n.Q6J("href",i.apodData.hdurl,n.LSH))},dependencies:[_.O5,J]}),t})();const Ae=[{path:"",component:(()=>{class t{constructor(){this.apodData=new A,this._apiLoaded=!1,this.currentDate={}}ngOnInit(){if(!this._apiLoaded){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",document.body.appendChild(e),this._apiLoaded=!0}}handleDate(e){console.log(e),this.currentDate=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-apod"]],decls:3,vars:1,consts:[[1,"container"],[3,"onDateSelected"],[3,"date"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"app-apod-picker",1),n.NdJ("onDateSelected",function(o){return i.handleDate(o)}),n.qZA(),n._UZ(2,"app-apod-content",2),n.qZA()),2&e&&(n.xp6(2),n.Q6J("date",i.currentDate))},dependencies:[X,_e]}),t})()}];let Ce=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[L.Bz.forChild(Ae),L.Bz]}),t})(),Te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({providers:[E],imports:[_.ez,Ce,be,c.u5,S.IJ]}),t})()}}]);